# Hash Table

| Операция | Средний Случай | Худший Случай |
| -------- | :------------: | :-----------: |
| Вставка  |      O(1)      |     O(n)      |
| Удаление |      O(1)      |     O(n)      |
| Поиск    |      O(1)      |     O(n)      |

Хэш-таблица - это структура данных, которая использует хэш-функцию для
преобразования ключа в индекс для хранения или поиска значения.

## Хэш-функция

Хэш-функция - это функция, которая принимает входные данные и возвращает
индекс, который может использоваться для поиска значения.

Хэш-функции должны быть детерминированными, то есть для одного и того же
входа всегда должен быть возвращен один и тот же выход. Они также должны
быть быстрыми, чтобы не замедлять операции вставки и поиска.

Но они могут приводить к коллизиям, когда два разных входа возвращают один
и тот же выход. Хорошая хэш-функция будет минимизировать количество коллизий.

## Коллизии

Коллизия возникает, когда два разных входа возвращают один и тот же выход
от хэш-функции. Это может произойти, когда хэш-функция возвращает индекс
вне диапазона индексов массива, или когда два разных входа возвращают один
и тот же индекс.

## Методы Разрешения Коллизий

1. **Метод Цепочек**: Как уже упоминалось, этот метод использует связанный список
   или другую структуру данных для хранения элементов, которые хэшируются в одну
   и ту же ячейку.

1. **Открытая Адресация**: Это семейство методов включает в себя:

    - [Линейное пробирование](./open-addressed/README.md#линейное-пробирование)
    - [Квадратичное пробирование](./open-addressed/README.md#квадратичное-пробирование)
    - [Двойное пробирование](./open-addressed/README.md#двойное-пробирование)

1. **Метод Рехэширования**: В этом методе используются несколько хэш-функций. При
   возникновении коллизии используется вторая хэш-функция, затем третья и так далее.

1. **Коэффициент Заполнения**: Управление коэффициентом заполнения (или фактором
   загрузки) таблицы путем изменения её размера может помочь уменьшить вероятность
   коллизий. Как правило, когда фактор загрузки достигает определенного порога,
   таблица увеличивается в размере, и все элементы рехэшируются.

1. **Совмещенное Пробирование (Cuckoo Hashing)**: Этот метод использует две хэш-функции
   и два массива. При возникновении коллизии элемент "вытесняет" элемент в другом
   массиве и так далее, создавая своеобразный цикл проб и ошибок.

1. **Хэширование с Помощью Ключа Размера Таблицы (Robin Hood Hashing)**: В этом методе
   информация о "расстоянии" от идеального местоположения элемента используется
   для определения, какой элемент должен быть перемещен при коллизии, чтобы минимизировать
   общее "расстояние" всех элементов.

1. **2-Choice Hashing**: Здесь используются две хэш-функции, и элемент размещается
   в наименее заполненной из двух бакетов, выбранных по этим функциям. Это может
   привести к более равномерному распределению элементов и уменьшению коллизий.

1. **Метод Хопскотч (Hopscotch Hashing)**: Этот метод комбинирует открытую адресацию
   с связанным списком и позволяет элементам "прыгать" на фиксированное расстояние
   от их идеального местоположения, уменьшая кластеризацию.

## Две Основные Реализации

### Открытая Адресация

Открытая адресация решает коллизии путем поиска другой ячейки в массиве для элемента,
который столкнулся с коллизией.

#### Преимущества

-   Память: Не требует дополнительной памяти вне самой таблицы, так как все элементы
    хранятся внутри самой таблицы.
-   Простота: Может быть проще в реализации, особенно для небольших таблиц.

#### Недостатки

-   Кластеризация: Может возникнуть проблема кластеризации, где коллизии скапливаются,
    что ухудшает производительность.
-   Переполнение: Если таблица заполнена, то необходимо изменить размер таблицы,
    что может быть дорогостоящей операцией.

### Метод Цепочек

Метод цепочек решает коллизии путем хранения всех элементов, которые хэшируются
в одну и ту же ячейку, в связанном списке (или другой структуре данных) в этой ячейке.

#### Преимущества

-   Гибкость: Может легко справляться с коллизиями, даже если таблица заполнена,
    так как каждая ячейка может хранить неограниченное количество элементов.
-   Меньше кластеризации: Не страдает от проблемы кластеризации, что обычно является
    проблемой для открытой адресации.

#### Недостатки

-   Память: Требует дополнительной памяти для хранения связанных списков.
-   Производительность: Операции поиска, вставки и удаления могут быть медленнее
    в случае длинных цепочек.

## Вывод

Выбор между открытой адресацией и методом цепочек будет зависеть от конкретных
требований к приложению, таких как ограничения памяти и требования к производительности.
Открытая адресация может быть предпочтительна, если необходима экономия памяти и
ожидается небольшая загрузка таблицы. Метод цепочек может быть лучше подходить
для ситуаций, где таблица может быть высоко заполнена или где требуется более
устойчивое решение проблемы коллизий.
